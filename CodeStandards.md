# 代码规范

## 基本原则

+ 必须使用阿里规约插件

+ 每个文件右上角，必须显示如下图标

  ![image-20191216175724382](CodeStandards.assets/image-20191216175724382.png) 

## 错误

### 原则

坚决杜绝代码中出现错误

### 可忽略错误

> 随时补充

## 警告

### 原则

+ 避免代码中存在警告
+ 对于无法解决得警告，需要使用注释标明原因
+ [可压制警告](#可压制警告)中提到得警告，必须使用`@SuppressWarnings`注解进行压制，并且使用注释标明压制原因，其他警告不允许压制

### 可忽略警告

> 随时补充

+ **代码不能超过80行**

  尽量将可抽离的方法进行抽离，如果无法缩减到80行以内，可忽略

+ **未使用**

  对于预留的类、方法、属性，报未使用警告时，可以采取压制

## 参数校验

+ 注解校验

  对于接口接收的请求参数，如果前端传值错误会导致后端出错，则必须使用参数校验注解进行校验（参数校验使用参见：https://github.com/Mshuyan/validation）

+ 手动校验

  需要进行逻辑判断才能知道参数的限定范围时，需要在代码中自己对参数进行校验

## 单元测试

+ 编写代码时，尽量将每个方法都以功能模块方式编写
+ 推荐使用单元测试对方法进行测试，及早发现逻辑错误

## 约束

### MyBatisPlus

#### Mapper方法命名

`mapper`接口中定义的方法不允许与`mybatisplus`中提供的查询方法同名，`mybtis`是通过代理调用`sql`的，同名方法会导致调用`sql`出错

#### 分页

所有的分页查询，必须使用`PageQuery`对象传递分页参数，不可以使用传递查询条件的`query`继承`IPage`

### 时间类型

时间类型不使用`Date`、`LocalDateTime`，这两个时间类型不包含时区信息，需要使用`Instant`时间戳类型

